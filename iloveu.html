<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title id="pageTitle">在一起xx年xx月xx天</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./css/main.css">
</head>

<body>
    <audio id="ad">
        <source src="./music.mp3" />
    </audio>
    <div id="back">
        <div class="mask"></div>
        <div id="carousel" class="carousel slide carousel-fade carousel-position">
            <div class="carousel-inner" style="width: 100%;height: 100%;" id="background">
                <!-- ...图片展示代码同原版... -->
            </div>
        </div>
    </div>
    <div class="modal show" style="top:24%;">
        <div class="modal-dialog" style="opacity: .9">
            <div class="modal-content" style="opacity:.85">
                <div class="modal-header">
                    <h1 class="text-center" style="color: #A94442;font-family: 'JournalRegular', Arial, sans-serif;font-size: 7rem;">I LOVE YOU</h1>
                    <p class="text-center small-title">yaoyao & meimei</p>
                    <p class="text-center small-title">Love story</p>
                </div>
                <div class="modal-body text-center" style="line-height: 1.5rem;font-family: 'JournalRegular', Arial, sans-serif;font-size: 3rem;">
                    <p>
                        <span id="day" class="time-font"></span><span style="color:#A94442">/&nbsp;</span>
                        <span id="hour" class="time-font"></span><span style="color:#A94442">/&nbsp;</span>
                        <span id="minute" class="time-font"></span><span style="color:#A94442">/&nbsp;</span>
                        <span id="second" class="time-font"></span>
                    </p>
                    <p>days/hours/min/sec</p>
                    <p class="text-center" style="color:#A94442;font-size: 17px" id="say"></p>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="./js/jquery-1.12.2.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./js/count-time.js"></script>
    <script>
        // 设置起始日期
        const startDate = new Date('2022/03/16 01:03');
        // 更新页面标题
        function updateTitle() {
            const now = new Date();
            let diff = now.getTime() - startDate.getTime();

            const year = Math.floor(diff / (365 * 24 * 3600 * 1000));
            diff -= year * 365 * 24 * 3600 * 1000;

            const month = Math.floor(diff / (30 * 24 * 3600 * 1000));
            diff -= month * 30 * 24 * 3600 * 1000;

            const day = Math.floor(diff / (24 * 3600 * 1000));

            document.title = `在一起${year}年${month}月${day}天`;
            // 可选：同步 modal 上的显示
            document.getElementById('pageTitle').innerText = document.title;
        }

        $(function () {
            // 原来的计时函数
            countTime('2022/03/16 01:03', 'day', 'hour', 'minute', 'second');
            // 初始化并每隔1秒刷新标题
            updateTitle();
            setInterval(updateTitle, 1000);

            var says = [
                "师妹，你是不是很紧张？---对啊，心跳的超快！",
                "妹妹，我想，以后每年都能在一起看花，可以吗？",
                "我把妹妹戴在手上啦，我要永远。",
                "第一次真正的合照，他们都说好甜。",
                "南沙天后宫。我许的愿除了论文，还有你。",
                "你的电脑屏保，所以，它成了我的最爱",
                "你躺在我腿上，我像是拥有了全世界",
                "送你戒指的那一晚，我们有了对未来的期盼",
                "大学城。中心湖，我带你来到了我最初的广州记忆",
                "东莞松山湖。你真的真的好可爱。",
                "毕业了。但我们的故事刚刚开始",
                "我会永远在你身旁",
                "我会永远给你依靠。",
                "我会，永远看着你笑。",
            ];

            var index = 0;
            var rate = 6000;
            $('#say').text(says[(index++) % says.length]);
            setInterval(function () {
                $('#say').hide();
                $('#say').text(says[(index++) % says.length]);
                $('#say').fadeToggle();
                $('#carousel').carousel('next');
            }, rate);

        });

        document.onclick = function () {
            var music = document.getElementById('ad');
            music.play();
        }
    </script>
</body>
</html>
